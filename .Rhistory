p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "#BBDEFB") +
theme_grey()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "#0D47A1") +
theme_grey()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_grey()
p
library(ggthemes)
library(ggthemes)
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_tufte()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_solid()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_wsj()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue") +
theme_hc()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.5) +
theme_hc()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc()
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=20,b=20,r=20,l=20)
)
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25)
)
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 5)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 2)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 5)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 15)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 10)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 8)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.8) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 8),
axis.title = element_text(size = 10)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.9) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 8),
axis.title = element_text(size = 10)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.85) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=25),
axis.text = element_text(size = 8),
axis.title = element_text(size = 10)
) + ggtitle("Distribution of children's age")
p
p <- ggplot(data = year_dist, aes(x = Var1, y = Freq)) +
geom_bar(stat = "identity", fill = "steelblue", width = 0.85) +
theme_hc() + labs(x = "Age (completed years)", y = "Frequency") + theme(
plot.margin =  margin(t=30,b=20,r=15,l=30),
axis.text = element_text(size = 8),
axis.title = element_text(size = 10)
) + ggtitle("Distribution of children's age")
p
runApp('who-survey-dash')
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
?updateSelectInput
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
hh_list
hh_list$province
unique(hh_list$province)
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
runApp('who-survey-dash')
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
survey_hh_summ <- survey_hh %>%
group_by(cluster_code, province, division, district, hh02) %>%
summarise(
n_children = n(),
elig_tcv = sum(tcv_elig == "1", na.rm = T),
elig_polio = sum(polio_elig == "1", na.rm = T)
) %>% left_join(roster_hh_summ)
View(survey_hh_summ)
View(survey_hh_summ)
write.csv(
survey_hh_summ,
'who-survey-dash/Data/survey_hh_summ.csv',
row.names = F,
na = ""
)
View(survey_hh_summ)
View(survey_hh_summ)
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
runApp('who-survey-dash')
survey_hh_summ <- survey_hh %>%
group_by(cluster_code, province, division, district, hh02) %>%
summarise(
n_children = n(),
elig_tcv = sum(tcv_elig == "1", na.rm = T),
elig_polio = sum(polio_elig == "1", na.rm = T)
) %>% left_join(roster_hh_summ)
write.csv(
survey_hh_summ,
'who-survey-dash/Data/survey_hh_summ.csv',
row.names = F,
na = ""
)
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
survey_hh_summ <- survey_hh %>%
group_by(cluster_code, province, division, district, hh02) %>%
summarise(
n_children = n(),
elig_tcv = sum(tcv_elig == "1", na.rm = T),
elig_polio = sum(polio_elig == "1", na.rm = T)
) %>% left_join(roster_hh_summ)
runApp('who-survey-dash')
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
runApp('who-survey-dash')
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
View(roster_adults)
View(roster_adults)
View(roster)
View(roster)
View(roster_adults_hh)
View(roster_adults_hh)
unique((roster_adults_hh %>% filter(cluster_code == 1))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 144))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 30))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 31))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 368))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 48))$hh02)
unique((roster_adults_hh %>% filter(cluster_code == 482))$hh02)
rbind(
unique((roster_adults_hh %>% filter(cluster_code == 1))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 144))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 30))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 31))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 368))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 48))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 482))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 496))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 50))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 673))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 803))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 822))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 841))$hh02),
unique((roster_adults_hh %>% filter(cluster_code == 935))$hh02)
)
data.frame(
rbind(
unique((
roster_adults_hh %>% filter(cluster_code == 1)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 144)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 30)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 31)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 368)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 48)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 482)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 496)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 50)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 673)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 803)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 822)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 841)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 935)
)$hh02)
)
)
roster_7 <- data.frame(
rbind(
unique((
roster_adults_hh %>% filter(cluster_code == 1)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 144)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 30)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 31)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 368)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 48)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 482)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 496)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 50)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 673)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 803)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 822)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 841)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 935)
)$hh02)
)
)
survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7$clust_no <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7 <- data.frame(
rbind(
unique((
roster_adults_hh %>% filter(cluster_code == 1)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 144)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 30)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 31)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 368)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 48)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 482)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 496)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 50)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 673)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 803)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 822)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 841)
)$hh02),
unique((
roster_adults_hh %>% filter(cluster_code == 935)
)$hh02)
)
)
roster_7 <- roster_7 %>% select(clust_no, everything())
roster_7$clust_no <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7 <- roster_7 %>% select(clust_no, everything())
View(roster_7)
View(roster_7)
write.csv(roster_7, 'roster_7.csv')
write.csv(roster_7, 'roster_7.csv', row.names = F)
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
source("~/Desktop/R-Projects/WHO survey/roster_7.r")
roster_7 <- data.frame()
roster_7$clust_no <- survey_summ$cluster_code[survey_summ$n_hh == 7]
rm(roster_7)
roster_7 <- data.frame()
roster_7$clust_no <- survey_summ$cluster_code[survey_summ$n_hh == 7]
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(roster_adults_hh %>% filter(cluster_code == x)))
View(roster_7_list)
View(roster_7_list)
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return((roster_adults_hh %>% filter(cluster_code == x))$hh02))
View(roster_7_list)
View(roster_7_list)
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(unique((roster_adults_hh %>% filter(cluster_code == x))$hh02)))
View(roster_7_list)
View(roster_7_list)
data.frame(roster_7_list)
lapply(roster_7_list, rbind)
data.frame(lapply(roster_7_list, rbind))
data.frame(lapply(roster_7_list, cbind))
data.frame(do.call(rbind, roster_7_list))
roster_7 <- data.frame(do.call(rbind, roster_7_list))
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(unique((roster_adults_hh %>% filter(cluster_code == x))$hh02)))
roster_7 <- data.frame(do.call(rbind, roster_7_list))
write.csv(roster_7, 'roster_7.csv', row.names = F)
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
source("~/Desktop/R-Projects/WHO survey/roster_7.r")
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(unique((roster_adults_hh %>% filter(cluster_code == x))$hh02)))
roster_7 <- data.frame(do.call(rbind, roster_7_list))
write.csv(roster_7, 'roster_7.csv', row.names = F)
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(unique((roster_adults_hh %>% filter(cluster_code == x))$hh02)))
roster_7 <- data.frame(do.call(rbind, roster_7_list))
write.csv(roster_7, 'roster_7.csv', row.names = F)
seven_clusts <- survey_summ$cluster_code[survey_summ$n_hh == 7]
roster_7_list <- lapply(seven_clusts, function(x) return(unique((roster_adults_hh %>% filter(cluster_code == x))$hh02)))
roster_7 <- data.frame(do.call(rbind, roster_7_list))
roster_7$clust_no <- seven_clusts
roster_7 <- roster_7 %>% select(clust_no, everything())
write.csv(roster_7, 'roster_7.csv', row.names = F)
View(roster_7)
View(roster_7)
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
source("~/Desktop/R-Projects/WHO survey/roster_7.r")
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
source("~/Desktop/R-Projects/WHO survey/roster_7.r")
source("~/Desktop/R-Projects/WHO survey/read.r")
source("~/Desktop/R-Projects/WHO survey/roster.r")
source("~/Desktop/R-Projects/WHO survey/survey.r")
source("~/Desktop/R-Projects/WHO survey/summarise.r")
source("~/Desktop/R-Projects/WHO survey/hh_monitor.r")
source("~/Desktop/R-Projects/WHO survey/roster_7.r")
shiny::runApp('who-survey-dash')
## function to read in the data (credentials revised)
readInODK <- function(svcLink, dataIndex, download) {
Sys.setenv(ODKC_URL = "https://surveygat.info/")
Sys.setenv(ODKC_SVC = svcLink)
Sys.setenv(ODKC_UN = "gat3@gmail.com")
Sys.setenv(ODKC_PW = "gat23456789@")
ruODK::ru_setup(
svc = Sys.getenv("ODKC_SVC"),
un = Sys.getenv("ODKC_UN"),
pw = Sys.getenv("ODKC_PW"),
tz = "Asia/Karachi",
verbose = TRUE
)
fq_svc <- ruODK::odata_service_get()
loc <- fs::path("media")
fq_data <- ruODK::odata_submission_get(
table = fq_svc$name[dataIndex],
local_dir = loc,
wkt = TRUE,
download = download
)
return(fq_data)
}
## read in the survey data
hh_entries <-
readInODK("https://surveygat.info/v1/projects/2/forms/3-Eligible_Children.svc",
1,
F)
View(hh_entries)
View(hh_entries)
